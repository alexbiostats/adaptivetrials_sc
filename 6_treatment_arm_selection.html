<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Adaptive Treatment Arm Selection</title>

<script src="site_libs/header-attrs-2.27/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
<link href="site_libs/academicons-1.9.1/css/academicons.css" rel="stylesheet" />

<link rel="icon" type="image/png" href="./files/favicon.ico"/>

<script type="text/javascript">
function setBrand() {
document.getElementsByClassName("navbar-brand")[0].href="https://www.alexkaizer.com";
}
window.onload = setBrand;
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Alex Kaizer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Short Course
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="0_intro.html">Intro and Welcome</a>
    </li>
    <li>
      <a href="1_intro_clinical_trials.html">Basics of Clinical Trials</a>
    </li>
    <li>
      <a href="2_intro_bayesian.html">Bayesian 101</a>
    </li>
    <li>
      <a href="3_interim_monitoring.html">Interim Monitoring</a>
    </li>
    <li>
      <a href="4_sample_size_reestimation.html">Sample Size Re-Estimation</a>
    </li>
    <li>
      <a href="5_adaptive_enrichment.html">Adaptive Enrichment</a>
    </li>
    <li>
      <a href="6_treatment_arm_selection.html">Treatment Arm Selection</a>
    </li>
    <li>
      <a href="7_adaptive_randomization.html">Adaptive Randomization</a>
    </li>
    <li>
      <a href="8_bayesian_information_sharing.html">Bayesian Information Sharing</a>
    </li>
    <li>
      <a href="9_master_protocols.html">Master Protocols</a>
    </li>
    <li>
      <a href="10_seamless_designs.html">Seamless Designs</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:alex.kaizer@cuanschutz.edu">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://scholar.google.com/citations?user=ICpH74EAAAAJ&amp;hl=en">
    <span class="ai ai-google-scholar ai-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.alexkaizer.com/files/Alex_CV.pdf">
    <span class="ai ai-cv ai-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/alexbiostats">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/AlexBiostats">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/alex-kaizer/">
    <span class="fab fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Adaptive Treatment Arm Selection</h1>

</div>


<div id="overview" class="section level1">
<h1>Overview</h1>
<p>There may be uncertainty as to which study arms to include in a
prospective trial, especially if we have multiple doses to consider,
multiple candidate therapies, or potentially limited resources to
explore all options. In this module we introduce the adaptive concept of
treatment arm dropping and adding.</p>
</div>
<div id="slide-deck" class="section level1">
<h1>Slide Deck</h1>
<iframe class="speakerdeck-iframe" style="border: 0px; background: rgba(0, 0, 0, 0.1) padding-box; margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" frameborder="0" src="https://speakerdeck.com/player/bebd3fb80cba4dc7a3e5fb6c16608507" title="Adaptive Treatment Arm Selection" allowfullscreen="true" data-ratio="1.7777777777777777">
</iframe>
<p> </p>
<p>You can also download the <a
href="./files/Slides/6_treatment_arm_selection.pptx">original PowerPoint
file</a>.</p>
</div>
<div id="code-examples-in-r" class="section level1">
<h1>Code Examples in R</h1>
<p>Within R there are plenty of packages to implement dose-finding
algorithms, which can be thought of as a form of arm dropping:</p>
<ul>
<li><a
href="https://cran.r-project.org/web/packages/CRM/index.html"><code>CRM</code></a>:
implements the continual reassessment method for phase I clinical
trials</li>
<li><a
href="https://cran.r-project.org/web/packages/bcrm/index.html"><code>bcrm</code></a>:
implements a Bayesian version of the CRM</li>
<li><a
href="https://cran.r-project.org/web/packages/DoseFinding/index.html"><code>DoseFinding</code></a>:
provides functions for designing and analyzing dose-finding experiments
with a focus on phase II studies</li>
</ul>
<p>For general treatment arm selection, many approaches are custom coded
by the user depending on the rules used.</p>
</div>
<div id="simulation-study" class="section level1">
<h1>Simulation Study</h1>
<p>For a brief simulation study, let’s compare the operating
characteristics for a set of different arm dropping rules:</p>
<ul>
<li>Keep all active arms that are not dropped for futility based on
one-sided Pocock stopping boundaries</li>
<li>Drop the arm with the smallest treatment effect at each stage as
long as it is not statistically significant at a more generous <span
class="math inline">\(\alpha=0.1\)</span> threshold</li>
<li>Drop the arm with the smallest treatment effect regardless of
statistical significance so the study ends with two arms</li>
</ul>
<p>In our simulation we make the following assumptions:</p>
<ul>
<li>There are six total arms (1 shared control, 5 treatment arms )</li>
<li>Each arm will enroll 100 if it never stops (i.e., power calculation
for two-sample t-test assuming <span
class="math inline">\(\alpha=0.05\)</span>, <span
class="math inline">\(\beta=0.8\)</span>, <span
class="math inline">\(\delta=0.4\)</span>, <span
class="math inline">\(\sigma=1\)</span>)</li>
<li>We will plan for 5 total stages (i.e., 20 per stage) so that the
final analysis can end with a control versus winner(s) comparison</li>
<li>We assume normally distributed outcomes with <span
class="math inline">\(\sigma=1\)</span> for all arms</li>
<li>The control group mean response is 0, our 5 treatment arm responses
are -0.05, 0, 0.1, 0.35, 0.4 (i.e., worse than control, same as control,
three improved relative to control by differing degrees)</li>
<li>We will not make any corrections for multiple testing</li>
</ul>
<p>Now let’s explore our results for the arms that remain at the end of
each study, overall sample size, and the rejection rates:</p>
<pre class="r fold-hide"><code>library(rpact) # load rpact for futility bounds

fo_p1 &lt;- getDesignGroupSequential(typeOfDesign = &quot;asUser&quot;, alpha=0.025, userAlphaSpending = c(0,0,0,0,0.025), 
                                 typeBetaSpending = &quot;bsP&quot;, # Pocock futility boundaries
                                 bindingFutility = FALSE, kMax = 5, sided=1, beta=0.2)
fo_p1_crit &lt;- fo_p1$futilityBounds #  extract futility boundaries
fo_p1_crit_mat &lt;- matrix( c(fo_p1_crit, -Inf), ncol=5, nrow=5) # create matrix to compare with test statistics in simulation, add -Inf for final comparison at end of trial

# set means (m) per study arm
mc &lt;- 0
m1 &lt;- -0.05
m2 &lt;- 0
m3 &lt;- 0.1
m4 &lt;- 0.35
m5 &lt;- 0.4

# set other parameters
sc &lt;- s1 &lt;- s2 &lt;- s3 &lt;- s4 &lt;- s5 &lt;- 1 # common variance, could change for other scenarios
seed &lt;- 515 # seed for reproducibility
nmax &lt;- 100 # max per arm
nstage &lt;- 5 # total number of stages
n_perstage &lt;- ceiling( seq(0,100,length.out=6)[-1] ) # number enrolled in each stage (so you can change nmax, nstage, etc. and code still works)
nsim &lt;- 1000 # number of simulations

strat1_res &lt;- strat2_res &lt;- strat3_res &lt;- matrix(nrow=nsim, ncol=11) # create objects to save simulation results

# simulation
set.seed(seed) # set seed for reproducibility

for( i in 1:nsim ){
  
  # use sapply to create matrix of data with each data set represented by a column
  simdat &lt;- sapply( c(&#39;c&#39;,1:5), function(x) rnorm(mean = get(paste0(&#39;m&#39;,x)), sd = get(paste0(&#39;s&#39;,x)), n=nmax) ) 
  
  # calculate two-sample t-tests for what the observed test statistic and p-value would be at each stage
  # write helper function, paircompare(), to extract this information
  paircompare &lt;- function(arm_control, arm_trt, n_perstage){
    ### Helper function to calculate test statistic and p-value for two groups given data and sample sizes to use
    # arm_control/arm_trt: vector with observed data up to max sample size
    # n_perstage: sample size after each stage
    
    tres &lt;- t(sapply(n_perstage, function(z) t.test(arm_trt[1:z], arm_control[1:z], alternative = &#39;greater&#39;)[c(&#39;p.value&#39;,&#39;statistic&#39;)] ))
    eres &lt;- sapply(n_perstage, function(z) mean(arm_trt[1:z]) - mean(arm_control[1:z] ) )
    
    return( cbind(tres, eres) )
  }
  
  res &lt;- sapply( 2:6, function(w) paircompare(arm_control = simdat[,1], arm_trt = simdat[,w], n_perstage = n_perstage)  )
  pval &lt;- as.matrix(res[1:5,]) # extract p-values at each stage for control vs. active arm
  tval &lt;- as.matrix(res[6:10,]) # extract t-values at each stage for control vs. active arm
  diff &lt;- as.matrix(res[11:15,]) # extract observed effect size (trt - con) at each stage (one-sided goal with trt &gt; con)
  
  
  ### Strategy 1: Pocock Boundaries
  
  fut_stop &lt;- (tval &lt; fo_p1_crit_mat) # calculate if each arm has any test statistics below the futility boundary
  
  arm_stop1 &lt;- sapply( 1:5, function(a) which(fut_stop[,a] == TRUE)[1] )
  arm_stop1[ is.na(arm_stop1) ] &lt;- 5 # make NA 5 since they never dropped for futility
  
  n_strat1 &lt;- n_perstage[arm_stop1] # record sample size for each arm
  ntot1 &lt;- sum(n_strat1) # sum up for total sample size
  
  finish1 &lt;- arm_stop1==5 # calculate indicator if arm made it to the end
  
  sig1 &lt;- rep(FALSE, 5) # create indicator if significant comparison
  sig1[ which(arm_stop1==5) ] &lt;- unlist(pval[,5])[ which(arm_stop1==5) ] &lt; 0.025 # estimate if arm is significant at alpha=0.025
  
  # save results
  strat1_res[i,] &lt;- c(ntot1, finish1, sig1)
  
  
  ### Strategy 2: Drop smallest treatment effect arm as long as not significant
  
  diff2 &lt;- diff # create copy of object to manipulate for decision rule
  
  arm_stop2 &lt;- rep(5,5) # create object to save when arm stops, assume 5 for all to start
  
  for( k in 1:4 ){
    armnum &lt;- which( unlist(diff2[k,]) == min(unlist(diff2[k,])) ) # calc arm with min effect size
    
    if( pval[k,armnum] &gt;= 0.1 ){
      arm_stop2[armnum] &lt;- k
      diff2[,armnum] &lt;- Inf # make all observed diffs large to ignore in next stage(s)
    }
  }

  n_strat2 &lt;- n_perstage[arm_stop2] # record sample size for each arm
  ntot2 &lt;- sum(n_strat2) # sum up for total sample size
  
  finish2 &lt;- arm_stop2==5 # calculate indicator if arm made it to the end
  
  sig2 &lt;- rep(FALSE, 5) # create indicator if significant comparison
  sig2[ which(arm_stop2==5) ] &lt;- unlist(pval[,5])[ which(arm_stop2==5) ] &lt; 0.025 # estimate if arm is significant at alpha=0.025
  
  # save results
  strat2_res[i,] &lt;- c(ntot2, finish2, sig2)
  

    
  ### Strategy 3: Drop smallest treatment effect arm regardless of significance
  
  diff3 &lt;- diff # create copy of object to manipulate for decision rule
  
  arm_stop3 &lt;- rep(5,5) # create object to save when arm stops, assume 5 for all to start
  
  for( k in 1:4 ){
    armnum &lt;- which( unlist(diff3[k,]) == min(unlist(diff3[k,])) ) # calc arm with min effect size
    
    arm_stop3[armnum] &lt;- k
    diff3[,armnum] &lt;- Inf # make all observed diffs large to ignore in next stage(s)
  }

  n_strat3 &lt;- n_perstage[arm_stop3] # record sample size for each arm
  ntot3 &lt;- sum(n_strat3) # sum up for total sample size
  
  finish3 &lt;- arm_stop3==5 # calculate indicator if arm made it to the end
  
  sig3 &lt;- sapply( 1:5, function(u) pval[ arm_stop3[u], u] &lt; 0.025 ) # create indicator if significant comparison, here we will check each arm regardless of stopping point
  
  # save results
  strat3_res[i,] &lt;- c(ntot3, finish3, sig3)
}

# Format results to display
strat1 &lt;- colMeans(strat1_res)
s1_sd &lt;- sd( strat1_res[,1] )
s1res &lt;- c( paste0( round(strat1[1]),&quot; (&quot;,round(s1_sd),&quot;)&quot;), paste0( strat1[2:11]*100, &quot;%&quot;) )

strat2 &lt;- colMeans(strat2_res)
s2_sd &lt;- sd( strat2_res[,1] )
s2res &lt;- c( paste0( round(strat2[1]),&quot; (&quot;,round(s2_sd),&quot;)&quot;), paste0( strat2[2:11]*100, &quot;%&quot;) )

strat3 &lt;- colMeans(strat3_res)
s3_sd &lt;- sd( strat3_res[,1] )
s3res &lt;- c( paste0( round(strat3[1]),&quot; (&quot;,round(s3_sd),&quot;)&quot;), paste0( strat3[2:11]*100, &quot;%&quot;) )

# Format results
library(kableExtra)
kbl_tab &lt;- rbind(&#39;Pocock Futility&#39; = s1res, &#39;Min(ES) and p&gt;0.1&#39; = s2res, &#39;Min(ES)&#39; = s3res)

kbl_tab %&gt;%
  kbl(col.names=c(&#39;Dropping Rule&#39;,&#39;ESS (SD)&#39;, &#39;ES=-0.5&#39;, &#39;ES=0&#39;, &#39;ES=0.1&#39;, &#39;ES=0.35&#39;,&#39;ES=0.4&#39;, &#39;ES=-0.5&#39;, &#39;ES=0&#39;, &#39;ES=0.1&#39;, &#39;ES=0.35&#39;,&#39;ES=0.4&#39;) ) %&gt;%
  kable_classic() %&gt;%
  add_header_above(c(&quot; &quot;=1, &quot; &quot;=1, &quot;Arm Made to End of Trial&quot;=5, &quot;Arm Rejected Null Hypothesis&quot;=5))</code></pre>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Arm Made to End of Trial
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Arm Rejected Null Hypothesis
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Dropping Rule
</th>
<th style="text-align:left;">
ESS (SD)
</th>
<th style="text-align:left;">
ES=-0.5
</th>
<th style="text-align:left;">
ES=0
</th>
<th style="text-align:left;">
ES=0.1
</th>
<th style="text-align:left;">
ES=0.35
</th>
<th style="text-align:left;">
ES=0.4
</th>
<th style="text-align:left;">
ES=-0.5
</th>
<th style="text-align:left;">
ES=0
</th>
<th style="text-align:left;">
ES=0.1
</th>
<th style="text-align:left;">
ES=0.35
</th>
<th style="text-align:left;">
ES=0.4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Pocock Futility
</td>
<td style="text-align:left;">
292 (83)
</td>
<td style="text-align:left;">
2.8%
</td>
<td style="text-align:left;">
4.8%
</td>
<td style="text-align:left;">
15.1%
</td>
<td style="text-align:left;">
64.8%
</td>
<td style="text-align:left;">
73.4%
</td>
<td style="text-align:left;">
1.3%
</td>
<td style="text-align:left;">
3.9%
</td>
<td style="text-align:left;">
13.2%
</td>
<td style="text-align:left;">
51.4%
</td>
<td style="text-align:left;">
68.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Min(ES) and p&gt;0.1
</td>
<td style="text-align:left;">
327 (28)
</td>
<td style="text-align:left;">
3.3%
</td>
<td style="text-align:left;">
5.7%
</td>
<td style="text-align:left;">
18%
</td>
<td style="text-align:left;">
80.7%
</td>
<td style="text-align:left;">
89.2%
</td>
<td style="text-align:left;">
1.6%
</td>
<td style="text-align:left;">
4.2%
</td>
<td style="text-align:left;">
14.8%
</td>
<td style="text-align:left;">
58.6%
</td>
<td style="text-align:left;">
76.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Min(ES)
</td>
<td style="text-align:left;">
300 (0)
</td>
<td style="text-align:left;">
0.1%
</td>
<td style="text-align:left;">
0%
</td>
<td style="text-align:left;">
1.4%
</td>
<td style="text-align:left;">
37.8%
</td>
<td style="text-align:left;">
60.7%
</td>
<td style="text-align:left;">
1.6%
</td>
<td style="text-align:left;">
2.7%
</td>
<td style="text-align:left;">
7.2%
</td>
<td style="text-align:left;">
61%
</td>
<td style="text-align:left;">
71.4%
</td>
</tr>
</tbody>
</table>
<p>From this simulation we can see that each decision rule has different
performance and properties:</p>
<ul>
<li>Pocock stopping has the lowest power because of its aggressive
stopping for futility, but does allow multiple arms to be dropped
resulting in a lower ESS. It also has the lowest rates of harmful
(ES=-0.5) or null (ES=0) arms making it to the end of the trial.</li>
<li>Dropping the smallest effect size in a stage, if <span
class="math inline">\(p&gt;\alpha=0.1\)</span>, results in the highest
proportions of the best two arms making it to the end of the trial, but
it also leads to a slightly higher rate of ES=0.1 making it to the end
which results in a larger ESS than we may desire.</li>
<li>Always dropping the minimum effect size, regardless of significance,
but testing each arm based on the available data results in lower power
and completion rates for ES=0.4, but does show slightly higher power for
ES=0.35. Even though the trial completion rate for ES=0.35 is only
37.8%, this conundrum may be explained by the fact that we allowed for
testing across all stages regardless of when it stopped and we may have,
by chance, stopped ES=0.35 at the 4th stage when it was significant but
if it continued enrollment to stage 5 its p-value increased over
0.025.</li>
</ul>
<p>In practice, the choice of dropping rules or strategies will be
driven by the context of your particular study and balancing the
strengthens and weaknesses across the trial operating
characteristics.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>Below are some references to highlight based on the slides and
code:</p>
<ul>
<li><p><a
href="https://www.fda.gov/regulatory-information/search-fda-guidance-documents/adaptive-design-clinical-trials-drugs-and-biologics-guidance-industry">FDA
Adaptive Design Clinical Trials for Drugs and Biologics Guidance for
Industry Guidance Document</a>: FDA guidance document on adaptive trial
elements</p></li>
<li><p><a
href="https://www.cambridge.org/core/journals/journal-of-clinical-and-translational-science/article/recent-innovations-in-adaptive-trial-designs-a-review-of-design-opportunities-in-translational-research/614EAFEA5E89CA035E82E152AF660E5D?utm_campaign=shareaholic&amp;utm_medium=copy_link&amp;utm_source=bookmark">Recent
innovations in adaptive trial designs: A review of design opportunities
in translational research</a>: 2023 review paper examining adaptive and
novel trial elements with included case studies</p></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
